// TODO: Build a better runner that uses Hook.spawn instead of this child process stuff

var finder = require('findit').find(__dirname),
    spawn  = require('child_process').spawn;

var tests = [];

finder.on('file', function (file) {
    
    if(file.search('test-') > 0){

      tests[file] = spawn('node', [file]);

      tests[file].stdout.on('data', function (data) {
        console.log(data.toString());
      });

      tests[file].stderr.on('data', function (data) {
        console.log(data.toString());
      });

      tests[file].on('exit', function (code) {
        console.log('child process exited with code ' + code);
      });

    }

});


